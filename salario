CREATE TABLE AUDITORIA_SALARIOS (
    ID_AUDITORIA NUMBER PRIMARY KEY,
    ID_EMPLEADO NUMBER,
    SALARIO_ANTERIOR NUMBER,
    NUEVO_SALARIO NUMBER,
    FECHA_CAMBIO DATE DEFAULT SYSDATE,
    CAMBIADO_POR VARCHAR2(100)
);


CREATE SEQUENCE SEQ_AUDITORIA_SALARIOS
START WITH 1
INCREMENT BY 1
NOCACHE;


CREATE OR REPLACE TRIGGER trg_auto_id_auditoria_salarios
BEFORE INSERT ON AUDITORIA_SALARIOS
FOR EACH ROW
BEGIN
    IF :NEW.ID_AUDITORIA IS NULL THEN
        :NEW.ID_AUDITORIA := SEQ_AUDITORIA_SALARIOS.NEXTVAL;
    END IF;
END;
/

--prueba 
INSERT INTO AUDITORIA_SALARIOS (ID_EMPLEADO, SALARIO_ANTERIOR, NUEVO_SALARIO, CAMBIADO_POR)
VALUES (101, 4000, 5000, 'HR_ADMIN');

--verificaci√≥n 
SELECT * FROM AUDITORIA_SALARIOS;
